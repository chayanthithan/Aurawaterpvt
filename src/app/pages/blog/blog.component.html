<div class="blog-page">
  <!-- Hero Section -->
<section class="page-banner">
  <!-- Animated Background -->
  <div class="background-effects">
    <!-- Floating Bubbles -->
    <div
      *ngFor="let bubble of bubbles"
      class="bubble"
      [style.width.px]="bubble.size"
      [style.height.px]="bubble.size"
      [style.left.%]="bubble.left"
      [style.animationDuration.s]="bubble.duration"
      [style.animationDelay.s]="bubble.delay">
    </div>

    <!-- Gradient Orbs -->
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>

    <!-- Ripple Effects -->
    <div class="ripple-container ripple-left">
      <div
        *ngFor="let ripple of ripples; let i = index"
        class="ripple-circle"
        [style.animationDelay.s]="i * 1.2">
      </div>
    </div>

    <div class="ripple-container ripple-right">
      <div
        *ngFor="let ripple of ripples; let i = index"
        class="ripple-circle"
        [style.animationDelay.s]="i * 1.5">
      </div>
    </div>
  </div>

  <!-- Wave SVG at bottom -->
  <div class="banner-wave-container">
    <svg viewBox="0 0 1440 120" preserveAspectRatio="none" class="banner-wave-svg">
      <defs>
        <linearGradient id="bannerWaveGradient" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#0891b2" stop-opacity="0.3" />
          <stop offset="50%" stop-color="#06b6d4" stop-opacity="0.5" />
          <stop offset="100%" stop-color="#22d3ee" stop-opacity="0.3" />
        </linearGradient>
      </defs>
      <path
        fill="url(#bannerWaveGradient)"
        d="M0,64L80,69.3C160,75,320,85,480,80C640,75,800,53,960,48C1120,43,1280,53,1360,58.7L1440,64L1440,120L1360,120C1280,120,1120,120,960,120C800,120,640,120,480,120C320,120,160,120,80,120L0,120Z"
        class="banner-wave-path">
      </path>
    </svg>
  </div>

  <!-- Content -->
  <div class="container">
    <div class="banner-content">
      <!-- Water Drop Icon -->
      <div class="water-drop-icon">
        <div class="drop-shape">
          <div class="drop-shine"></div>
        </div>
      </div>

      <!-- Breadcrumbs -->
      <nav class="breadcrumbs" *ngIf="breadcrumbs.length > 0">
        <a routerLink="/" class="breadcrumb-item">
          <i class="fas fa-home"></i>
          Home
        </a>
        <span class="breadcrumb-separator">
          <i class="fas fa-chevron-right"></i>
        </span>
        <ng-container *ngFor="let crumb of breadcrumbs; let last = last">
          <a *ngIf="crumb.link && !last" [routerLink]="crumb.link" class="breadcrumb-item">
            {{ crumb.label }}
          </a>
          <span *ngIf="!crumb.link || last" class="breadcrumb-item active">
            {{ crumb.label }}
          </span>
          <span *ngIf="!last" class="breadcrumb-separator">
            <i class="fas fa-chevron-right"></i>
          </span>
        </ng-container>
      </nav>

      <!-- Title -->
      <h1 class="banner-title">{{ title }}</h1>

      <!-- Subtitle -->
      <p class="banner-subtitle" *ngIf="subtitle">{{ subtitle }}</p>

      <!-- Decorative Line -->
      <div class="title-decoration">
        <span class="decoration-line"></span>
        <span class="decoration-dot"></span>
        <span class="decoration-line"></span>
      </div>
    </div>
  </div>
</section>

  <!-- Blog Content Section -->
  <section class="section blog-section">
    <div class="container">
      
      <!-- Filter Header -->
      <div class="blog-header">
        <div class="filters">
          <label class="filter-label">Filter by tag</label>
          <select [(ngModel)]="selectedTag" (ngModelChange)="onTagChange()" class="filter-select">
            <option *ngFor="let tag of tags" [value]="tag">{{ tag }}</option>
          </select>
        </div>
        <button *ngIf="featuredBlog" class="btn btn-outline btn-sm" (click)="clearFeatured()">
          <i class="fas fa-th"></i> View All Equal
        </button>
      </div>

      <!-- Featured Blog (Large Display) -->
      <div class="featured-blog" *ngIf="featuredBlog" @fadeIn>
        <div class="featured-wrapper">
          <!-- Featured Image -->
          <div class="featured-image-container">
            <img [src]="featuredBlog.coverImage" [alt]="featuredBlog.title" class="featured-image">
            <div class="featured-overlay"></div>
            <span class="featured-category">{{ featuredBlog.category }}</span>
            <button class="featured-close" (click)="clearFeatured()" aria-label="Close featured view">
              <i class="fas fa-times"></i>
            </button>
          </div>
          
          <!-- Featured Content -->
          <div class="featured-content">
            <h2 class="featured-title">{{ featuredBlog.title }}</h2>
            
            <div class="featured-meta">
              <span class="meta-item">
                <i class="fas fa-user"></i> By {{ featuredBlog.author }}
              </span>
              <span class="meta-item">
                <i class="fas fa-calendar-alt"></i> {{ featuredBlog.createdDate | date:'MMMM dd, yyyy' }}
              </span>
            </div>
            
            <div class="featured-tags">
              <span class="tag" *ngFor="let t of featuredBlog.tags">#{{ t }}</span>
            </div>
            
            <div class="featured-body">
              {{ featuredBlog.content }}
            </div>
            
            <!-- Social Links -->
            <div class="featured-social">
              <a *ngIf="featuredBlog.instagramLink" [href]="featuredBlog.instagramLink" target="_blank" class="social-link instagram">
                <i class="fab fa-instagram"></i>
              </a>
              <a *ngIf="featuredBlog.facebookLink" [href]="featuredBlog.facebookLink" target="_blank" class="social-link facebook">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a *ngIf="featuredBlog.linkedinLink" [href]="featuredBlog.linkedinLink" target="_blank" class="social-link linkedin">
                <i class="fab fa-linkedin-in"></i>
              </a>
              <a *ngIf="featuredBlog.githubLink" [href]="featuredBlog.githubLink" target="_blank" class="social-link github">
                <i class="fab fa-github"></i>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Section Divider (when featured exists) -->
      <div class="other-blogs-header" *ngIf="featuredBlog && otherBlogs.length > 0">
        <h3 class="other-blogs-title">More Articles</h3>
        <div class="divider-line"></div>
      </div>

      <!-- Blog Grid -->
      <div class="posts-grid" [class.has-featured]="featuredBlog">
        <article class="post-card" *ngFor="let blog of otherBlogs" (click)="selectFeatured(blog)">
          <!-- Card Image -->
          <div class="card-image-wrapper" *ngIf="blog.coverImage">
            <img [src]="blog.coverImage" [alt]="blog.title" class="card-image">
            <div class="card-overlay"></div>
            <span class="card-category">{{ blog.category }}</span>
          </div>
          
          <!-- Card Content -->
          <div class="card-content">
            <h3 class="card-title">{{ blog.title }}</h3>
            
            <div class="card-meta">
              <span class="meta-item">
                <i class="fas fa-user"></i> {{ blog.author }}
              </span>
              <span class="meta-item">
                <i class="fas fa-calendar"></i> {{ blog.createdDate | date:'MMM dd, yyyy' }}
              </span>
            </div>
            
            <p class="card-excerpt">
              {{ blog.excerpt || (blog.content | slice:0:150) }}
              <span *ngIf="isLong(blog, 150)">...</span>
            </p>
            
            <div class="card-footer">
              <span class="read-more-link">
                Read More <i class="fas fa-arrow-right"></i>
              </span>
              <div class="card-tags">
                <span class="tag-small" *ngFor="let t of blog.tags | slice:0:2">#{{ t }}</span>
              </div>
            </div>
          </div>
        </article>
      </div>

      <!-- Empty State -->
      <div class="empty-state" *ngIf="otherBlogs.length === 0 && !featuredBlog">
        <i class="fas fa-file-alt"></i>
        <h3>No blog posts</h3>
        <p>Please check back later for new articles.</p>
      </div>

      <!-- Pagination -->
      <div class="pagination" *ngIf="totalPages > 1">
        <button class="btn btn-outline" (click)="prevPage()" [disabled]="page === 0">
          <i class="fas fa-chevron-left"></i> Prev
        </button>
        <ng-container *ngFor="let p of [].constructor(totalPages); let i = index">
          <button class="btn" [class.btn-primary]="i === page" [class.btn-outline]="i !== page" (click)="goToPage(i)">
            {{ i + 1 }}
          </button>
        </ng-container>
        <button class="btn btn-outline" (click)="nextPage()" [disabled]="page + 1 >= totalPages">
          Next <i class="fas fa-chevron-right"></i>
        </button>
        <span class="page-info">Page {{ page + 1 }} of {{ totalPages }}</span>
      </div>
      
    </div>
  </section>
</div>