<section class="products-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Our Products</h2>
      <p class="section-subtitle">Discover our range of high-quality water purification systems</p>
    </div>

    <!-- Filter Section (only show if showFilters is true) -->
    <div class="filters-section" *ngIf="showFilters && limitProducts === 0">
      <div class="filters-container">
        <!-- Search Bar -->
        <div class="filter-group search-group">
          <input 
            type="text" 
            class="search-input" 
            placeholder="Search products..."
            [(ngModel)]="searchTerm"
            (input)="onSearchChange()">
          <i class="fas fa-search search-icon"></i>
        </div>

        <!-- Category Filter -->
        <div class="filter-group">
          <label class="filter-label">Category</label>
          <select 
            class="filter-select" 
            [(ngModel)]="selectedCategory"
            (change)="onCategoryChange(selectedCategory)">
            <option value="all">All Categories</option>
            <option *ngFor="let category of categories.slice(1)" [value]="category">
              {{ category }}
            </option>
          </select>
        </div>

        <!-- Price Range Filter -->
        <div class="filter-group">
          <label class="filter-label">Price Range</label>
          <select 
            class="filter-select" 
            [(ngModel)]="selectedPriceRange"
            (change)="onPriceRangeChange(selectedPriceRange)">
            <option *ngFor="let range of priceRanges" [value]="range.value">
              {{ range.label }}
            </option>
          </select>
        </div>

        <!-- Clear Filters Button -->
        <button class="clear-filters-btn" (click)="clearFilters()">
          <i class="fas fa-times"></i> Clear Filters
        </button>
      </div>

      <!-- Results Count -->
      <div class="results-info">
        <p>Showing {{ filteredProducts.length }} of {{ products.length }} products</p>
      </div>
    </div>

    <!-- Products Grid -->
    <div class="products-grid">
      <div class="product-item" *ngFor="let product of filteredProducts" (click)="sendToWhatsApp(product)">
        <div class="product-image">
          <img [src]="product.image" [alt]="product.name">
          
          <div class="whatsapp-icon">
            <i class="fab fa-whatsapp"></i>
          </div>
          
          <div class="product-overlay">
            <h3 class="product-title">{{ product.name }}</h3>
            
            <div class="product-details">
              <div class="detail-row">
                <span class="detail-label">Capacity:</span>
                <span class="detail-value">{{ product.capacity }}</span>
              </div>
              
              <div class="detail-row">
                <span class="detail-label">Filter Time:</span>
                <span class="detail-value">{{ product.filterTime }}</span>
              </div>

              <div class="detail-row" *ngIf="product.price">
                <span class="detail-label">Price:</span>
                <span class="detail-value">{{ product.price }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- View All Button (only show on home page) -->
    <div class="view-all-section" *ngIf="showViewAll">
      <a routerLink="/products" class="btn btn-primary">
        View All Products
        <i class="fas fa-arrow-right"></i>
      </a>
    </div>
  </div>
</section>